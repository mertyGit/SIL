<!DOCTYPE html>

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>sil.c</title><link rel="stylesheet" type="text/css" href="../styles/main.css" /><script type="text/javascript" src="../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.2 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="About_SIL"></a><a name="Topic8"></a><div class="CTopic TGroup LC first">
 <div class="CTitle">About SIL</div>
</div>

<a name="Using_SIL"></a><a name="Topic47"></a><div class="CTopic TInformation LC">
 <div class="CTitle">Using SIL</div>
 <div class="CBody"><p>The standard flow of a program that is using SIL is like this:</p><ul><li><p>start of your application</p></li><li><p>Initialize SIL -&gt; <a href="../index.html#File:sil.c:sil_initSIL" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,3);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_initSIL()</a></p></li><li><p>(optional) Set logging -&gt; <a href="../index.html#File:sil.c:sil_setLog" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,12);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_setLog()</a></p></li><li><p>Create/load/place - initial - layers</p></li><li><p>(optional) attach your own handlers to layers -&gt; <a href="../index.html#File:layer.c:sil_setKeyHandler" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,22);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_setKeyHandler()</a> <a href="../index.html#File:layer.c:sil_setClickHandler" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,26);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_setClickHandler()</a> <a href="../index.html#File:layer.c:sil_setHoverHandler" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,25);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_setHoverHandler()</a> <a href="../index.html#File:layer.c:sil_setDragHandler" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,17);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_setDragHandler()</a></p></li><li><p>(optional) set timer handler &amp; timer -&gt; <a href="../index.html#File:sil.c:sil_setTimerHandler" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,7);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_setTimerHandler()</a> <a href="../index.html#File:sil.c:sil_setTimeval" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,19);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_setTimeval()</a></p></li><li><p>Send 1st update to display -&gt; &lt;sil_updateDisplay()&gt;</p></li><li><p>Enter SIL mainloop until quit is requested -&gt; <a href="../index.html#File:sil.c:sil_mainLoop" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,5);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_mainLoop()</a> &amp; <a href="../index.html#File:sil.c:sil_quitLoop" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,4);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_quitLoop()</a></p></li><li><p>clean-up SIL resources -&gt; <a href="../index.html#File:sil.c:sil_destroySIL" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,10);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_destroySIL()</a></p></li><li><p>end of your application</p></li></ul></div>
</div>

<a name="Example_basic_program"></a><a name="Topic15"></a><div class="CTopic TInformation LC">
 <div class="CTitle">Example basic program</div>
 <div class="CBody"><p>This will create a program that will show a small window with a white area and green filled rectange in it</p><div class="CImage"><a href="../images/basicprogram.png" target="_blank" class="ZoomLink"><img src="../images/basicprogram.png" loading="lazy" class="KnownDimensions" width="211" height="238" style="max-width: 211px" alt="basicprogram" /></a></div><pre class="CCode">#include &lt;stdio.h&gt;<br />#include <span class="SHString">&quot;sil.h&quot;</span><br />#include <span class="SHString">&quot;log.h&quot;</span><br /><br /><span class="SHKeyword">int</span> main() {<br />  SILLYR *drawing;<br /><br />  <span class="SHComment">// Initialize SIL; Create a window of 200x200 with title &quot;basic example&quot;</span><br />  sil_initSIL(<span class="SHNumber">200</span>,<span class="SHNumber">200</span>,<span class="SHString">&quot;basic example&quot;</span>,NULL);<br /><br />  <span class="SHComment">// Create layer in this window at position 10,10 and dimension 150x150</span><br />  drawing=sil_addLayer(<span class="SHNumber">10</span>,<span class="SHNumber">10</span>,<span class="SHNumber">150</span>,<span class="SHNumber">150</span>,SILTYPE_ABGR);<br /><br />  <span class="SHComment">// paint background of layer white, no transparancy</span><br />  sil_paintLayer(drawing,SILCOLOR_WHITE,<span class="SHNumber">255</span>);<br />  <span class="SHComment">// set foreground color - in this case the border - to dark green, no transparancy</span><br />  sil_setForegroundColor(SILCOLOR_DARK_GREEN,<span class="SHNumber">255</span>);<br />  <span class="SHComment">// set background color - in this fill of rectangle - to green, opacity at 50</span><br />  sil_setBackgroundColor(SILCOLOR_GREEN,<span class="SHNumber">50</span>);<br />  <span class="SHComment">// set width of lines (for border) to 4</span><br />  sil_setDrawWidth(<span class="SHNumber">4</span>);<br />  <span class="SHComment">// Draw a rectangle inside layer &quot;drawing&quot; at 15,15 and dimension 100x100</span><br />  sil_drawRectangle(drawing,<span class="SHNumber">15</span>,<span class="SHNumber">15</span>,<span class="SHNumber">100</span>,<span class="SHNumber">100</span>);<br /><br />  <span class="SHComment">// update display (window in this case)</span><br />  sil_updateDisplay();<br /><br />  <span class="SHComment">// Wait till event makes it quit, like alt+F4 or closing window</span><br />  sil_mainLoop();<br /><br />  <span class="SHComment">// Cleanup</span><br />  sil_destroySIL();<br />}</pre></div>
</div>

<a name="SIL_Structure"></a><a name="Topic9"></a><div class="CTopic TGroup LC">
 <div class="CTitle">SIL Structure</div>
</div>

<a name="sil_initSIL"></a><a name="Topic3"></a><div class="CTopic TFunction LC">
 <div class="CTitle">sil_initSIL</div>
 <div id="NDPrototype3" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters">UINT sil_initSIL(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PType first">UINT&nbsp;</td><td></td><td class="PName last">width,</td></tr><tr><td class="PType first">UINT&nbsp;</td><td></td><td class="PName last">height,</td></tr><tr><td class="PType first"><span class="SHKeyword">char</span>&nbsp;</td><td class="PSymbols">*</td><td class="PName last">title,</td></tr><tr><td class="PType first"><span class="SHKeyword">void</span>&nbsp;</td><td class="PSymbols">*</td><td class="PName last">hInstance</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>initialize SIL context for all other calls. It will be used to contain program related stuff like initializing logging and global variables</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">width<div class="CDLParameterType">UINT</div></td><td class="CDLDefinition"><p>width of window to create (or screen display).</p></td></tr><tr><td class="CDLEntry">height<div class="CDLParameterType">UINT</div></td><td class="CDLDefinition"><p>height of window to create (or screen display).</p></td></tr><tr><td class="CDLEntry">title<div class="CDLParameterType"><span class="SHKeyword">char</span>*</div></td><td class="CDLDefinition"><p>Title to use for window (only for windowed environments).</p></td></tr><tr><td class="CDLEntry">hInstance<div class="CDLParameterType"><span class="SHKeyword">void</span>*</div></td><td class="CDLDefinition"><p>Only for Windows/GDI; pass Windows instance handle from WinMain.&nbsp; Set to NULL for non-Windows and/or SDL environments</p></td></tr></table><div class="CHeading">Returns</div><p>Error code or SILERR_ALLOK (0) if all went ok</p></div>
</div>

<a name="sil_mainLoop"></a><a name="Topic5"></a><div class="CTopic TFunction LC">
 <div class="CTitle">sil_mainLoop</div>
 <div id="NDPrototype5" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">void</span> sil_mainLoop()</div></div>
 <div class="CBody"><p>Wait for events from timer, mouse and/or keyboard to handle.&nbsp; this loop will continiously process incoming display events and redeligate them to the appropriate program or layer handlers</p><div class="CHeading">Events</div><ul><li><p><b>timer</b> event <b>SILLDISP_TIMER</b> will be send to handler set via <a href="../index.html#File:sil.c:sil_setTimerHandler" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,7);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_setTimerHandler</a> globally for the whole program</p></li><li><p><b>mouse button</b> events, like <b>SILDISP_MOUSE_UP</b> <b>SILDISP_MOUSE_DOWN</b> <b>SILDISP_MOUSEWHEEL</b> will be send to the highest visible layer right under mouse cursor that has a registered a mousehandler via <a href="../index.html#File:layer.c:sil_setClickHandler" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,26);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_setClickHandler</a></p></li><li><p><b>mouse move</b> events, If mousepointers is above a visible layer with hoverhandler set, <b>SILDISP_MOUSE_ENTER</b> will be send to hoverhandler that has been set via <a href="../index.html#File:layer.c:sil_setHoverHandler" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,25);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_setHoverHandler()</a>.&nbsp; Any mousemovement later, it will send <b>SILDISP_MOUSE_MOVE</b> events.&nbsp; If mouse leaves the layer, it will send a <b>SILDISP_MOUSE_LEFT</b>.</p></li><li><p><b>mouse drag</b> event, is a combination of <b>SILDISP_MOUSE_DOWN</b> and <b>SILDISP_MOUSE_MOVE</b>, that will be intepreted as a <b>SILDISP_MOUSE_DRAG</b> if the highest visible layer under mouse cursor also has a draghandler set via <a href="../index.html#File:layer.c:sil_setDragHandler" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,17);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_setDragHandler</a></p></li><li><p><b>keypress</b> event, SILDISP_KEY_UP or SILDISP_KEY_DOWN send to the highest layer that has a keyhandler registered - via <a href="../index.html#File:layer.c:sil_setKeyHandler" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,22);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_setKeyHandler</a> for every or specific keys or combinations.</p></li></ul><div class="CHeading">Remarks</div><ul><li><p>Mainloop is blocking and waiting for event after event until window is closed or <a href="../index.html#File:sil.c:sil_quitLoop" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,4);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_quitLoop</a> event is called. If any other time-critical task has to be handled, you might use timer for this, or use a separate thread allongside (outside scope of SIL, very platform dependend).</p></li><li><p>Mouse handler looks for <b>visible</b> pixels right under mouse cursor. Therefore, a layer under another layer - and that do have both click/hover/drag handlers, can be selected to send event to if the layer above has transparant pixel at that point. If this is unwanted, you can set the &quot;<b>SILFLAG_MOUSEALLPIX</b>&quot; via <a href="../index.html#File:layer.c:sil_setFlags" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,27);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_setFlags</a>, this will make the whole -with or without transparant pixels - layer (rectangular form) selectable.</p></li><li><p>Mouse handlers walk from highest layer to lowest finding the first layer with the appropiate handler set. Sometimes this is unwanted, like when using a layer as a &quot;pop-up window&quot;, and you want to prevent anly events send to layers under this &quot;window&quot;. You can prevent this by setting flag <b>SILFLAG_MOUSESHIELD</b> via <a href="../index.html#File:layer.c:sil_setFlags" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,27);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_setFlags</a>, and unset it after &quot;window&quot; layer isn't needed anymore.</p></li><li><p>Key events can be send to any layer, visible or not and independend of mouse position, that registers the keyevent with that particular event. However it might be more usefull to have one layer with a handler handling (and maybe dispatching) <b>all</b> keyevents as a kind of catch-all, and only registers particulair key-combo's for other layers, like function-keys bounded to handler of layer that is used as menubutton or some sort.</p></li></ul></div>
</div>

<a name="sil_quitLoop"></a><a name="Topic4"></a><div class="CTopic TFunction LC">
 <div class="CTitle">sil_quitLoop</div>
 <div id="NDPrototype4" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">void</span> sil_quitLoop()</div></div>
 <div class="CBody"><p>signal to stop <a href="../index.html#File:sil.c:sil_mainLoop" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,5);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_mainLoop</a>. Usually to instruct SIL to clean up and quit the program.</p></div>
</div>

<a name="sil_destroySIL"></a><a name="Topic10"></a><div class="CTopic TFunction LC">
 <div class="CTitle">sil_destroySIL</div>
 <div id="NDPrototype10" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">void</span> sil_destroySIL()</div></div>
 <div class="CBody"><p>Close &amp; cleanup SIL</p></div>
</div>

<a name="Logging_and_errors"></a><a name="Topic42"></a><div class="CTopic TGroup LC">
 <div class="CTitle">Logging and errors</div>
</div>

<a name="sil_setLog"></a><a name="Topic12"></a><div class="CTopic TFunction LC">
 <div class="CTitle">sil_setLog</div>
 <div id="NDPrototype12" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters">UINT sil_setLog(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PType first"><span class="SHKeyword">char</span>&nbsp;</td><td class="PSymbols">*</td><td class="PName last">logname,</td></tr><tr><td class="PType first">BYTE&nbsp;</td><td></td><td class="PName last">flags</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Initialize logging parameters</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">logname<div class="CDLParameterType"><span class="SHKeyword">char</span>*</div></td><td class="CDLDefinition"><p>name of logfile to write to. If NULL, stdout will be used</p></td></tr><tr><td class="CDLEntry">flags<div class="CDLParameterType">BYTE</div></td><td class="CDLDefinition"><p>kind of logging we want to capture, can be combined LOG_INFO | LOG_DEBUG | LOG_VERBOSE</p></td></tr></table><div class="CHeading">Returns</div><p>SILLERR_ALLOK (0) when done, Error on any other code</p><div class="CHeading">Remarks</div><p>Only call this <b>after</b> calling <a href="../index.html#File:sil.c:sil_initSIL" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,3);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_initSIL</a></p><p>If not called at start, &quot;LOG_INFO&quot; &amp; LOG_VERBOSE information will be logged to stdout. Prevent logging by setting logname to NULL and flags to 0</p></div>
</div>

<a name="sil_err2Txt"></a><a name="Topic13"></a><div class="CTopic TFunction LC">
 <div class="CTitle">sil_err2Txt</div>
 <div id="NDPrototype13" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">const</span> <span class="SHKeyword">char</span> * sil_err2Txt(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PType first">UINT&nbsp;</td><td class="PName last">errorcode</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Optional function to convert any internal SIL error code to a more human understandable form.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">errorcode<div class="CDLParameterType">UINT</div></td><td class="CDLDefinition"><p>SIL error code</p></td></tr></table><div class="CHeading">Returns</div><p>string that explains errorcode</p></div>
</div>

<a name="Timer"></a><a name="Topic48"></a><div class="CTopic TGroup LC">
 <div class="CTitle">Timer</div>
</div>

<a name="sil_setTimerHandler"></a><a name="Topic7"></a><div class="CTopic TFunction LC">
 <div class="CTitle">sil_setTimerHandler</div>
 <div id="NDPrototype7" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">void</span> sil_setTimerHandler(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PModifierQualifier first">UINT (*</td><td class="PType">timer</td><td class="PSymbols">)(</td><td class="PName last">SILEVENT *)</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>set timer handler</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">timer</td><td class="CDLDefinition"><p>own handler function that accepts a pointer to <b>SILEVENT</b> and returns 1 if display has to be updated or not (0).</p></td></tr></table><div class="CHeading">Remarks</div><ul><li><p>Only one timer can be set per SIL program. Therefore, setting a Timerhandler will overwrite any existing -and running !- timers.</p></li><li><p>Don't forget to use <a href="../index.html#File:sil.c:sil_setTimeval" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,19);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_setTimeval</a> to set time-out of timer</p></li><li><p>Timers are not auto-repeating, if you want to, call <a href="../index.html#File:sil.c:sil_setTimeval" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,19);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_setTimeval</a> at end of your timerhandler.</p></li><li><p>You can always cancel any running timers by calling <a href="../index.html#File:sil.c:sil_setTimeval" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,19);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >sil_setTimeval</a> with 0</p></li></ul></div>
</div>

<a name="sil_setTimeval"></a><a name="Topic19"></a><div class="CTopic TFunction LC">
 <div class="CTitle">sil_setTimeval</div>
 <div id="NDPrototype19" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">void</span> sil_setTimeval(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PType first">UINT&nbsp;</td><td class="PName last">amount</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>set timer to given amount of miliseconds</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">amount<div class="CDLParameterType">UINT</div></td><td class="CDLDefinition"><p>delay in miliseconds until timer handler is called. use '0' to cancel any running timer</p></td></tr></table><div class="CHeading">Remarks</div><ul><li><p>will cancel and overwrite any previous -running- timers</p></li><li><p>timer isn't repeating, so do set it again after handling timer event if you want to</p></li></ul></div>
</div>

<a name="sil_getTimeval"></a><a name="Topic2"></a><div class="CTopic TFunction LC last">
 <div class="CTitle">sil_getTimeval</div>
 <div id="NDPrototype2" class="NDPrototype"><div class="PSection PPlainSection">UINT sil_getTimeval()</div></div>
 <div class="CBody"><p>If you have trouble remembering things, retrieve the amount of miliseconds you did set your timer to</p><div class="CHeading">Returns</div><p>amount of miliseconds</p></div>
</div>

</body></html>